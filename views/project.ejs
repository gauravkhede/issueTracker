<!DOCTYPE html>
<html>
<head>
    
    <title>Project</title>
  <link rel="stylesheet" href="//code.jquery.com/ui/1.13.1/themes/base/jquery-ui.css">
  <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
  <script src="https://code.jquery.com/ui/1.13.1/jquery-ui.js"></script>
</head>
<body>
    <%= name %>
   
    <form action="/filter" method="post">
    <select name="filterByAuthor" id="">
       <% for(let auth of all_Authors){ %>
            <option value="<%= auth.name%>"> <%=auth.name %></option>
        <% } %>
    </select>
    <input type="hidden" name="project_id" value="<%=project_id%>">
    <input type="submit" value="submit">
    </form>
    <form action="/createBug" method="post">
        <input type="hidden" name="project" value="<%= name%>">
        <input type="hidden" name="project_id" value="<%=project_id %>">
        <input type="text" name="title" placeholder="Enter Title of bug here">
        <input type="text" name="description" placeholder="Enter Description of bug here">
        <input type="text" name="labels" id="searchLabel" placeholder="Enter Label here">
        <input type="text" name="author" placeholder="Enter Author Name here">
        <input type="submit" value="submit">
    </form>
   
    
    <% for(let bug of bugs){ %>
        
        <% let bug_name='name' %>
        name of bug: <%=bug.title %>, <br>
        Description of Bug: <%= bug.description %>, <br>
        <% if(bug.labels!=null){ %>
        Label of Bug: <%= bug.labels.labels %>, <br>
        <% } %>
        Author of Bug: <%= bug.author.name%> <br> <br>
        <% console.log(bug,' is the bug') %>

        <% } %>

        <script>
            $(function(){
               $('#searchLabel').autocomplete({
                   source: function(req,res){
                        $.ajax({
                            url:'autocomplete/',
                            dataType:'jsonp',
                            type:'GET',
                            data:req,
                            success:function(data){
                                console.log(data,'data success function tk aaraha hai');
                                res(data);
                            },
                            error:function(err){
                                console.log(err.status);
                            }

                        })


                   },
                   minLength:1,
                   select:function(event,ui){
                       if(ui.item){
                           $('#searchLabel').text(ui.item.label);
                       }
                   }
               }); 
            })
        </script>
</body>
</html>